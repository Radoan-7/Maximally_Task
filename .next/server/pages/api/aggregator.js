"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/aggregator";
exports.ids = ["pages/api/aggregator"];
exports.modules = {

/***/ "cheerio":
/*!**************************!*\
  !*** external "cheerio" ***!
  \**************************/
/***/ ((module) => {

module.exports = import("cheerio");;

/***/ }),

/***/ "(api)/./pages/api/aggregator.js":
/*!*********************************!*\
  !*** ./pages/api/aggregator.js ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cheerio */ \"cheerio\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([cheerio__WEBPACK_IMPORTED_MODULE_0__]);\ncheerio__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst GITHUB_TOKEN = process.env.GITHUB_TOKEN;\n// Cache to reduce API calls\nlet cache = {\n    ts: 0,\n    data: null\n};\nconst CACHE_TTL = 1000 * 60 * 5; // 5 minutes\n// --- Fetch hackathons from Unstop ---\nasync function fetchUnstop() {\n    const MAX_SITEMAPS = 12;\n    const base = \"https://unstop.com/sitemaps/opportunity/sitemap\";\n    const headers = {\n        \"User-Agent\": \"Mozilla/5.0\",\n        Accept: \"application/xml,text/xml;q=0.9,*/*;q=0.8\"\n    };\n    const sitemapUrls = Array.from({\n        length: MAX_SITEMAPS\n    }, (_, i)=>`${base}${i + 1}.xml`);\n    const items = [];\n    for (const url of sitemapUrls){\n        try {\n            const res = await fetch(url, {\n                headers\n            });\n            if (!res.ok) {\n                console.error(`Failed to fetch ${url}: ${res.status}`);\n                continue;\n            }\n            const xml = await res.text();\n            const $ = cheerio__WEBPACK_IMPORTED_MODULE_0__[\"default\"].load(xml, {\n                xmlMode: true\n            });\n            $(\"url\").each((_, el)=>{\n                const loc = $(el).find(\"loc\").text().trim();\n                if (!loc || !/\\/hackathons\\//i.test(loc)) return;\n                const lastmod = $(el).find(\"lastmod\").text().trim();\n                const title = slugToTitle((loc.split(\"/hackathons/\")[1] || \"\").split(\"/\")[0]);\n                items.push({\n                    source: \"unstop\",\n                    title: title || \"Untitled\",\n                    link: loc,\n                    description: \"\",\n                    tags: [\n                        lastmod\n                    ].filter(Boolean),\n                    prizeText: \"\"\n                });\n            });\n        } catch (e) {\n            console.error(\"Unstop fetch error:\", e);\n        }\n    }\n    const map = new Map();\n    for (const it of items)if (!map.has(it.link)) map.set(it.link, it);\n    const out = Array.from(map.values());\n    out.sort((a, b)=>new Date(b.tags[0] || 0) - new Date(a.tags[0] || 0));\n    console.log(`Unstop fetched: ${out.length} hackathons`);\n    return out;\n}\nfunction slugToTitle(slug) {\n    if (!slug) return \"\";\n    const cleaned = slug.replace(/-\\d+$/, \"\");\n    return cleaned.split(\"-\").map((s)=>s ? s[0].toUpperCase() + s.slice(1) : \"\").join(\" \");\n}\n// --- Fetch hackathons from GitHub ---\nasync function fetchGithubHackathons() {\n    const q = encodeURIComponent(\"hackathon in:name,description pushed:>=\" + getDateNDaysAgo(365));\n    const url = `https://api.github.com/search/repositories?q=${q}&sort=updated&order=desc&per_page=30`;\n    const headers = {\n        \"User-Agent\": \"hackathon-aggregator\"\n    };\n    if (GITHUB_TOKEN) headers.Authorization = `token ${GITHUB_TOKEN}`;\n    try {\n        const res = await fetch(url, {\n            headers\n        });\n        if (!res.ok) {\n            console.error(\"GitHub API error:\", res.status, await res.text());\n            return [];\n        }\n        const json = await res.json();\n        const items = json.items || [];\n        const mapped = items.map((it)=>({\n                source: \"github\",\n                title: it.full_name,\n                link: it.html_url,\n                description: it.description || \"\",\n                tags: it.topics || [],\n                prizeText: \"\"\n            }));\n        console.log(`GitHub fetched: ${mapped.length} hackathons`);\n        return mapped;\n    } catch (e) {\n        console.error(\"GitHub fetch error:\", e);\n        return [];\n    }\n}\nfunction getDateNDaysAgo(n) {\n    const d = new Date();\n    d.setDate(d.getDate() - n);\n    return d.toISOString().slice(0, 10);\n}\nfunction parsePrize(prizeText) {\n    if (!prizeText) return 0;\n    let txt = prizeText.toUpperCase().replace(/[,₹£€$]/g, \"\").trim();\n    if (/(\\d+)\\s*K/.test(txt)) return parseInt(RegExp.$1, 10) * 1000;\n    if (/(\\d+)\\s*L/.test(txt)) return parseInt(RegExp.$1, 10) * 100000;\n    const match = txt.match(/(\\d{2,})/);\n    return match ? Number(match[1]) : 0;\n}\n// --- Main API handler ---\nasync function handler(req, res) {\n    try {\n        const { source = \"all\", filter = \"\", minPrize = 0 } = req.query;\n        const now = Date.now();\n        if (!cache.data || now - cache.ts > CACHE_TTL) {\n            console.log(\"Cache expired or empty. Fetching hackathons...\");\n            const [unstop, github] = await Promise.allSettled([\n                fetchUnstop(),\n                fetchGithubHackathons()\n            ]);\n            cache = {\n                ts: Date.now(),\n                data: {\n                    unstop: unstop.status === \"fulfilled\" ? unstop.value : [],\n                    github: github.status === \"fulfilled\" ? github.value : []\n                }\n            };\n        }\n        let combined = [];\n        if (source === \"unstop\" || source === \"all\") combined = combined.concat(cache.data.unstop);\n        if (source === \"github\" || source === \"all\") combined = combined.concat(cache.data.github);\n        // Keyword filter\n        const f = filter.toLowerCase();\n        if (f) {\n            combined = combined.filter((item)=>{\n                const text = (item.title + \" \" + item.description + \" \" + (item.tags || []).join(\" \")).toLowerCase();\n                if (f === \"ai\") return text.includes(\"ai\") || text.includes(\"machine learning\");\n                if (f === \"student\") return text.includes(\"student\");\n                return text.includes(f);\n            });\n        }\n        // Prize filter\n        const minP = Number(minPrize || 0);\n        if (minP > 0) {\n            combined = combined.filter((item)=>parsePrize(item.prizeText) >= minP);\n        }\n        res.setHeader(\"Cache-Control\", \"s-maxage=60, stale-while-revalidate=120\");\n        res.status(200).json({\n            ok: true,\n            count: combined.length,\n            data: combined\n        });\n    } catch (err) {\n        console.error(\"Hackathon API error:\", err);\n        res.status(500).json({\n            ok: false,\n            error: String(err)\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQztZQUFFcEQsSUFBSTtZQUFNdUYsT0FBT1IsU0FBU3RGLE1BQU07WUFBRVYsTUFBTWdHO1FBQVM7SUFDMUUsRUFBRSxPQUFPUyxLQUFLO1FBQ1p2RixRQUFRQyxLQUFLLENBQUMsd0JBQXdCc0Y7UUFDdEMxRixJQUFJSyxNQUFNLENBQUMsS0FBS2lELElBQUksQ0FBQztZQUFFcEQsSUFBSTtZQUFPRSxPQUFPdUYsT0FBT0Q7UUFBSztJQUN2RDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFja2F0aG9uLWFnZ3JlZ2F0b3IvLi9wYWdlcy9hcGkvYWdncmVnYXRvci5qcz85MmQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaGVlcmlvIGZyb20gXCJjaGVlcmlvXCI7XHJcblxyXG5jb25zdCBHSVRIVUJfVE9LRU4gPSBwcm9jZXNzLmVudi5HSVRIVUJfVE9LRU47XHJcblxyXG4vLyBDYWNoZSB0byByZWR1Y2UgQVBJIGNhbGxzXHJcbmxldCBjYWNoZSA9IHsgdHM6IDAsIGRhdGE6IG51bGwgfTtcclxuY29uc3QgQ0FDSEVfVFRMID0gMTAwMCAqIDYwICogNTsgLy8gNSBtaW51dGVzXHJcblxyXG4vLyAtLS0gRmV0Y2ggaGFja2F0aG9ucyBmcm9tIFVuc3RvcCAtLS1cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hVbnN0b3AoKSB7XHJcbiAgY29uc3QgTUFYX1NJVEVNQVBTID0gMTI7XHJcbiAgY29uc3QgYmFzZSA9IFwiaHR0cHM6Ly91bnN0b3AuY29tL3NpdGVtYXBzL29wcG9ydHVuaXR5L3NpdGVtYXBcIjtcclxuICBjb25zdCBoZWFkZXJzID0ge1xyXG4gICAgXCJVc2VyLUFnZW50XCI6IFwiTW96aWxsYS81LjBcIixcclxuICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi94bWwsdGV4dC94bWw7cT0wLjksKi8qO3E9MC44XCIsXHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2l0ZW1hcFVybHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBNQVhfU0lURU1BUFMgfSwgKF8sIGkpID0+IGAke2Jhc2V9JHtpICsgMX0ueG1sYCk7XHJcbiAgY29uc3QgaXRlbXMgPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCB1cmwgb2Ygc2l0ZW1hcFVybHMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgeyBoZWFkZXJzIH0pO1xyXG4gICAgICBpZiAoIXJlcy5vaykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCAke3VybH06ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgeG1sID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZCh4bWwsIHsgeG1sTW9kZTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICQoXCJ1cmxcIikuZWFjaCgoXywgZWwpID0+IHtcclxuICAgICAgICBjb25zdCBsb2MgPSAkKGVsKS5maW5kKFwibG9jXCIpLnRleHQoKS50cmltKCk7XHJcbiAgICAgICAgaWYgKCFsb2MgfHwgIS9cXC9oYWNrYXRob25zXFwvL2kudGVzdChsb2MpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGxhc3Rtb2QgPSAkKGVsKS5maW5kKFwibGFzdG1vZFwiKS50ZXh0KCkudHJpbSgpO1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gc2x1Z1RvVGl0bGUoKGxvYy5zcGxpdChcIi9oYWNrYXRob25zL1wiKVsxXSB8fCBcIlwiKS5zcGxpdChcIi9cIilbMF0pO1xyXG5cclxuICAgICAgICBpdGVtcy5wdXNoKHtcclxuICAgICAgICAgIHNvdXJjZTogXCJ1bnN0b3BcIixcclxuICAgICAgICAgIHRpdGxlOiB0aXRsZSB8fCBcIlVudGl0bGVkXCIsXHJcbiAgICAgICAgICBsaW5rOiBsb2MsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJcIixcclxuICAgICAgICAgIHRhZ3M6IFtsYXN0bW9kXS5maWx0ZXIoQm9vbGVhbiksXHJcbiAgICAgICAgICBwcml6ZVRleHQ6IFwiXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiVW5zdG9wIGZldGNoIGVycm9yOlwiLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcclxuICBmb3IgKGNvbnN0IGl0IG9mIGl0ZW1zKSBpZiAoIW1hcC5oYXMoaXQubGluaykpIG1hcC5zZXQoaXQubGluaywgaXQpO1xyXG4gIGNvbnN0IG91dCA9IEFycmF5LmZyb20obWFwLnZhbHVlcygpKTtcclxuICBvdXQuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi50YWdzWzBdIHx8IDApIC0gbmV3IERhdGUoYS50YWdzWzBdIHx8IDApKTtcclxuXHJcbiAgY29uc29sZS5sb2coYFVuc3RvcCBmZXRjaGVkOiAke291dC5sZW5ndGh9IGhhY2thdGhvbnNgKTtcclxuICByZXR1cm4gb3V0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzbHVnVG9UaXRsZShzbHVnKSB7XHJcbiAgaWYgKCFzbHVnKSByZXR1cm4gXCJcIjtcclxuICBjb25zdCBjbGVhbmVkID0gc2x1Zy5yZXBsYWNlKC8tXFxkKyQvLCBcIlwiKTtcclxuICByZXR1cm4gY2xlYW5lZFxyXG4gICAgLnNwbGl0KFwiLVwiKVxyXG4gICAgLm1hcCgocykgPT4gKHMgPyBzWzBdLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpIDogXCJcIikpXHJcbiAgICAuam9pbihcIiBcIik7XHJcbn1cclxuXHJcbi8vIC0tLSBGZXRjaCBoYWNrYXRob25zIGZyb20gR2l0SHViIC0tLVxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEdpdGh1YkhhY2thdGhvbnMoKSB7XHJcbiAgY29uc3QgcSA9IGVuY29kZVVSSUNvbXBvbmVudChcclxuICAgIFwiaGFja2F0aG9uIGluOm5hbWUsZGVzY3JpcHRpb24gcHVzaGVkOj49XCIgKyBnZXREYXRlTkRheXNBZ28oMzY1KVxyXG4gICk7XHJcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vc2VhcmNoL3JlcG9zaXRvcmllcz9xPSR7cX0mc29ydD11cGRhdGVkJm9yZGVyPWRlc2MmcGVyX3BhZ2U9MzBgO1xyXG4gIGNvbnN0IGhlYWRlcnMgPSB7IFwiVXNlci1BZ2VudFwiOiBcImhhY2thdGhvbi1hZ2dyZWdhdG9yXCIgfTtcclxuICBpZiAoR0lUSFVCX1RPS0VOKSBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgdG9rZW4gJHtHSVRIVUJfVE9LRU59YDtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgeyBoZWFkZXJzIH0pO1xyXG4gICAgaWYgKCFyZXMub2spIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkdpdEh1YiBBUEkgZXJyb3I6XCIsIHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICBjb25zdCBpdGVtcyA9IGpzb24uaXRlbXMgfHwgW107XHJcbiAgICBjb25zdCBtYXBwZWQgPSBpdGVtcy5tYXAoKGl0KSA9PiAoe1xyXG4gICAgICBzb3VyY2U6IFwiZ2l0aHViXCIsXHJcbiAgICAgIHRpdGxlOiBpdC5mdWxsX25hbWUsXHJcbiAgICAgIGxpbms6IGl0Lmh0bWxfdXJsLFxyXG4gICAgICBkZXNjcmlwdGlvbjogaXQuZGVzY3JpcHRpb24gfHwgXCJcIixcclxuICAgICAgdGFnczogaXQudG9waWNzIHx8IFtdLFxyXG4gICAgICBwcml6ZVRleHQ6IFwiXCIsXHJcbiAgICB9KSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coYEdpdEh1YiBmZXRjaGVkOiAke21hcHBlZC5sZW5ndGh9IGhhY2thdGhvbnNgKTtcclxuICAgIHJldHVybiBtYXBwZWQ7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkdpdEh1YiBmZXRjaCBlcnJvcjpcIiwgZSk7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXREYXRlTkRheXNBZ28obikge1xyXG4gIGNvbnN0IGQgPSBuZXcgRGF0ZSgpO1xyXG4gIGQuc2V0RGF0ZShkLmdldERhdGUoKSAtIG4pO1xyXG4gIHJldHVybiBkLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVByaXplKHByaXplVGV4dCkge1xyXG4gIGlmICghcHJpemVUZXh0KSByZXR1cm4gMDtcclxuICBsZXQgdHh0ID0gcHJpemVUZXh0LnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvWyzigrnCo+KCrCRdL2csIFwiXCIpLnRyaW0oKTtcclxuICBpZiAoLyhcXGQrKVxccypLLy50ZXN0KHR4dCkpIHJldHVybiBwYXJzZUludChSZWdFeHAuJDEsIDEwKSAqIDEwMDA7XHJcbiAgaWYgKC8oXFxkKylcXHMqTC8udGVzdCh0eHQpKSByZXR1cm4gcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgKiAxMDAwMDA7XHJcbiAgY29uc3QgbWF0Y2ggPSB0eHQubWF0Y2goLyhcXGR7Mix9KS8pO1xyXG4gIHJldHVybiBtYXRjaCA/IE51bWJlcihtYXRjaFsxXSkgOiAwO1xyXG59XHJcblxyXG4vLyAtLS0gTWFpbiBBUEkgaGFuZGxlciAtLS1cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHNvdXJjZSA9IFwiYWxsXCIsIGZpbHRlciA9IFwiXCIsIG1pblByaXplID0gMCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBpZiAoIWNhY2hlLmRhdGEgfHwgbm93IC0gY2FjaGUudHMgPiBDQUNIRV9UVEwpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJDYWNoZSBleHBpcmVkIG9yIGVtcHR5LiBGZXRjaGluZyBoYWNrYXRob25zLi4uXCIpO1xyXG4gICAgICBjb25zdCBbdW5zdG9wLCBnaXRodWJdID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFtcclxuICAgICAgICBmZXRjaFVuc3RvcCgpLFxyXG4gICAgICAgIGZldGNoR2l0aHViSGFja2F0aG9ucygpLFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIGNhY2hlID0ge1xyXG4gICAgICAgIHRzOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHVuc3RvcDogdW5zdG9wLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiA/IHVuc3RvcC52YWx1ZSA6IFtdLFxyXG4gICAgICAgICAgZ2l0aHViOiBnaXRodWIuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiID8gZ2l0aHViLnZhbHVlIDogW10sXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY29tYmluZWQgPSBbXTtcclxuICAgIGlmIChzb3VyY2UgPT09IFwidW5zdG9wXCIgfHwgc291cmNlID09PSBcImFsbFwiKSBjb21iaW5lZCA9IGNvbWJpbmVkLmNvbmNhdChjYWNoZS5kYXRhLnVuc3RvcCk7XHJcbiAgICBpZiAoc291cmNlID09PSBcImdpdGh1YlwiIHx8IHNvdXJjZSA9PT0gXCJhbGxcIikgY29tYmluZWQgPSBjb21iaW5lZC5jb25jYXQoY2FjaGUuZGF0YS5naXRodWIpO1xyXG5cclxuICAgIC8vIEtleXdvcmQgZmlsdGVyXHJcbiAgICBjb25zdCBmID0gZmlsdGVyLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoZikge1xyXG4gICAgICBjb21iaW5lZCA9IGNvbWJpbmVkLmZpbHRlcigoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSAoXHJcbiAgICAgICAgICBpdGVtLnRpdGxlICtcclxuICAgICAgICAgIFwiIFwiICtcclxuICAgICAgICAgIGl0ZW0uZGVzY3JpcHRpb24gK1xyXG4gICAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgICAgKGl0ZW0udGFncyB8fCBbXSkuam9pbihcIiBcIilcclxuICAgICAgICApLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIGlmIChmID09PSBcImFpXCIpIHJldHVybiB0ZXh0LmluY2x1ZGVzKFwiYWlcIikgfHwgdGV4dC5pbmNsdWRlcyhcIm1hY2hpbmUgbGVhcm5pbmdcIik7XHJcbiAgICAgICAgaWYgKGYgPT09IFwic3R1ZGVudFwiKSByZXR1cm4gdGV4dC5pbmNsdWRlcyhcInN0dWRlbnRcIik7XHJcbiAgICAgICAgcmV0dXJuIHRleHQuaW5jbHVkZXMoZik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByaXplIGZpbHRlclxyXG4gICAgY29uc3QgbWluUCA9IE51bWJlcihtaW5Qcml6ZSB8fCAwKTtcclxuICAgIGlmIChtaW5QID4gMCkge1xyXG4gICAgICBjb21iaW5lZCA9IGNvbWJpbmVkLmZpbHRlcigoaXRlbSkgPT4gcGFyc2VQcml6ZShpdGVtLnByaXplVGV4dCkgPj0gbWluUCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnNldEhlYWRlcihcIkNhY2hlLUNvbnRyb2xcIiwgXCJzLW1heGFnZT02MCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT0xMjBcIik7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG9rOiB0cnVlLCBjb3VudDogY29tYmluZWQubGVuZ3RoLCBkYXRhOiBjb21iaW5lZCB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJIYWNrYXRob24gQVBJIGVycm9yOlwiLCBlcnIpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBvazogZmFsc2UsIGVycm9yOiBTdHJpbmcoZXJyKSB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNoZWVyaW8iLCJHSVRIVUJfVE9LRU4iLCJwcm9jZXNzIiwiZW52IiwiY2FjaGUiLCJ0cyIsImRhdGEiLCJDQUNIRV9UVEwiLCJmZXRjaFVuc3RvcCIsIk1BWF9TSVRFTUFQUyIsImJhc2UiLCJoZWFkZXJzIiwiQWNjZXB0Iiwic2l0ZW1hcFVybHMiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJfIiwiaSIsIml0ZW1zIiwidXJsIiwicmVzIiwiZmV0Y2giLCJvayIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyIsInhtbCIsInRleHQiLCIkIiwibG9hZCIsInhtbE1vZGUiLCJlYWNoIiwiZWwiLCJsb2MiLCJmaW5kIiwidHJpbSIsInRlc3QiLCJsYXN0bW9kIiwidGl0bGUiLCJzbHVnVG9UaXRsZSIsInNwbGl0IiwicHVzaCIsInNvdXJjZSIsImxpbmsiLCJkZXNjcmlwdGlvbiIsInRhZ3MiLCJmaWx0ZXIiLCJCb29sZWFuIiwicHJpemVUZXh0IiwiZSIsIm1hcCIsIk1hcCIsIml0IiwiaGFzIiwic2V0Iiwib3V0IiwidmFsdWVzIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsImxvZyIsInNsdWciLCJjbGVhbmVkIiwicmVwbGFjZSIsInMiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiam9pbiIsImZldGNoR2l0aHViSGFja2F0aG9ucyIsInEiLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZXREYXRlTkRheXNBZ28iLCJBdXRob3JpemF0aW9uIiwianNvbiIsIm1hcHBlZCIsImZ1bGxfbmFtZSIsImh0bWxfdXJsIiwidG9waWNzIiwibiIsImQiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInRvSVNPU3RyaW5nIiwicGFyc2VQcml6ZSIsInR4dCIsInBhcnNlSW50IiwiUmVnRXhwIiwiJDEiLCJtYXRjaCIsIk51bWJlciIsImhhbmRsZXIiLCJyZXEiLCJtaW5Qcml6ZSIsInF1ZXJ5Iiwibm93IiwidW5zdG9wIiwiZ2l0aHViIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJ2YWx1ZSIsImNvbWJpbmVkIiwiY29uY2F0IiwiZiIsInRvTG93ZXJDYXNlIiwiaXRlbSIsImluY2x1ZGVzIiwibWluUCIsInNldEhlYWRlciIsImNvdW50IiwiZXJyIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/aggregator.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/aggregator.js"));
module.exports = __webpack_exports__;

})();