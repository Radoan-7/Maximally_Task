"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/aggregator";
exports.ids = ["pages/api/aggregator"];
exports.modules = {

/***/ "cheerio":
/*!**************************!*\
  !*** external "cheerio" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("cheerio");

/***/ }),

/***/ "node-fetch":
/*!*****************************!*\
  !*** external "node-fetch" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node-fetch");

/***/ }),

/***/ "(api)/./pages/api/aggregator.js":
/*!*********************************!*\
  !*** ./pages/api/aggregator.js ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst fetch = __webpack_require__(/*! node-fetch */ \"node-fetch\");\nconst cheerio = __webpack_require__(/*! cheerio */ \"cheerio\");\nconst GITHUB_TOKEN = process.env.GITHUB_TOKEN;\n// cache object to reduce API calls\nlet cache = {\n    ts: 0,\n    data: null\n};\nconst CACHE_TTL = 1000 * 60 * 5; // 5 minutes\n// --- Fetch hackathons from Unstop ---\nasync function fetchUnstop() {\n    const MAX_SITEMAPS = 12;\n    const base = \"https://unstop.com/sitemaps/opportunity/sitemap\";\n    const headers = {\n        \"User-Agent\": \"Mozilla/5.0\",\n        Accept: \"application/xml,text/xml;q=0.9,*/*;q=0.8\"\n    };\n    const sitemapUrls = Array.from({\n        length: MAX_SITEMAPS\n    }, (_, i)=>`${base}${i + 1}.xml`);\n    const items = [];\n    for (const url of sitemapUrls){\n        try {\n            const res = await fetch(url, {\n                headers\n            });\n            if (!res.ok) continue;\n            const xml = await res.text();\n            const $ = cheerio.load(xml, {\n                xmlMode: true\n            });\n            $(\"url\").each((_, el)=>{\n                const loc = $(el).find(\"loc\").text().trim();\n                if (!loc || !/\\/hackathons\\//i.test(loc)) return;\n                const lastmod = $(el).find(\"lastmod\").text().trim();\n                const title = slugToTitle((loc.split(\"/hackathons/\")[1] || \"\").split(\"/\")[0]);\n                items.push({\n                    source: \"unstop\",\n                    title: title || \"Untitled\",\n                    link: loc,\n                    description: \"\",\n                    tags: [\n                        lastmod\n                    ].filter(Boolean),\n                    prizeText: \"\"\n                });\n            });\n        } catch (e) {\n            console.error(\"Unstop fetch error:\", e);\n        }\n    }\n    // deduplicate by link\n    const map = new Map();\n    for (const it of items)if (!map.has(it.link)) map.set(it.link, it);\n    const out = Array.from(map.values());\n    // sort by last modified\n    out.sort((a, b)=>new Date(b.tags[0] || 0) - new Date(a.tags[0] || 0));\n    return out;\n}\nfunction slugToTitle(slug) {\n    if (!slug) return \"\";\n    const cleaned = slug.replace(/-\\d+$/, \"\");\n    return cleaned.split(\"-\").map((s)=>s ? s[0].toUpperCase() + s.slice(1) : \"\").join(\" \");\n}\n// --- Fetch hackathons from GitHub ---\nasync function fetchGithubHackathons() {\n    const q = encodeURIComponent(\"hackathon in:name,description pushed:>=\" + getDateNDaysAgo(365));\n    const url = `https://api.github.com/search/repositories?q=${q}&sort=updated&order=desc&per_page=30`;\n    const headers = {\n        \"User-Agent\": \"hackathon-aggregator\"\n    };\n    if (GITHUB_TOKEN) headers.Authorization = `token ${GITHUB_TOKEN}`;\n    const res = await fetch(url, {\n        headers\n    });\n    if (!res.ok) return [];\n    const json = await res.json();\n    const items = json.items || [];\n    return items.map((it)=>({\n            source: \"github\",\n            title: it.full_name,\n            link: it.html_url,\n            description: it.description || \"\",\n            tags: it.topics || [],\n            prizeText: \"\"\n        }));\n}\nfunction getDateNDaysAgo(n) {\n    const d = new Date();\n    d.setDate(d.getDate() - n);\n    return d.toISOString().slice(0, 10);\n}\n// --- Prize parser ---\nfunction parsePrize(prizeText) {\n    if (!prizeText) return 0;\n    let txt = prizeText.toUpperCase().replace(/[,₹£€$]/g, \"\").trim();\n    // Handle \"10K\", \"5K\", \"2L\" (lakhs), etc.\n    if (/(\\d+)\\s*K/.test(txt)) {\n        return parseInt(RegExp.$1, 10) * 1000;\n    }\n    if (/(\\d+)\\s*L/.test(txt)) {\n        return parseInt(RegExp.$1, 10) * 100000;\n    }\n    const match = txt.match(/(\\d{2,})/);\n    return match ? Number(match[1]) : 0;\n}\n// --- Main API handler ---\nmodule.exports = async (req, res)=>{\n    try {\n        const { source = \"all\", filter = \"\", minPrize = 0 } = req.query;\n        const now = Date.now();\n        if (!cache.data || now - cache.ts > CACHE_TTL) {\n            const [unstop, github] = await Promise.allSettled([\n                fetchUnstop(),\n                fetchGithubHackathons()\n            ]);\n            cache = {\n                ts: Date.now(),\n                data: {\n                    unstop: unstop.status === \"fulfilled\" ? unstop.value : [],\n                    github: github.status === \"fulfilled\" ? github.value : []\n                }\n            };\n        }\n        let combined = [];\n        if (source === \"unstop\" || source === \"all\") combined = combined.concat(cache.data.unstop);\n        if (source === \"github\" || source === \"all\") combined = combined.concat(cache.data.github);\n        // --- Keyword filter ---\n        const f = filter.toLowerCase();\n        if (f) {\n            combined = combined.filter((item)=>{\n                const text = (item.title + \" \" + item.description + \" \" + (item.tags || []).join(\" \")).toLowerCase();\n                if (f === \"ai\") return text.includes(\"ai\") || text.includes(\"machine learning\");\n                if (f === \"student\") return text.includes(\"student\");\n                return text.includes(f);\n            });\n        }\n        // --- Prize filter ---\n        const minP = Number(minPrize || 0);\n        if (minP > 0) {\n            combined = combined.filter((item)=>parsePrize(item.prizeText) >= minP);\n        }\n        res.setHeader(\"Cache-Control\", \"s-maxage=60, stale-while-revalidate=120\");\n        res.status(200).json({\n            ok: true,\n            count: combined.length,\n            data: combined\n        });\n    } catch (err) {\n        console.error(\"Hackathon API error:\", err);\n        res.status(500).json({\n            ok: false,\n            error: String(err)\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU07UUFFOUMseUJBQXlCO1FBQ3pCLE1BQU1PLElBQUkzRCxPQUFPNEQsV0FBVztRQUM1QixJQUFJRCxHQUFHO1lBQ0xGLFdBQVdBLFNBQVN6RCxNQUFNLENBQUMsQ0FBQzZEO2dCQUMxQixNQUFNaEYsT0FBTyxDQUNYZ0YsS0FBS3JFLEtBQUssR0FDVixNQUNBcUUsS0FBSy9ELFdBQVcsR0FDaEIsTUFDQSxDQUFDK0QsS0FBSzlELElBQUksSUFBSSxFQUFFLEVBQUV3QixJQUFJLENBQUMsSUFBRyxFQUMxQnFDLFdBQVc7Z0JBRWIsSUFBSUQsTUFBTSxNQUNSLE9BQU85RSxLQUFLaUYsUUFBUSxDQUFDLFNBQVNqRixLQUFLaUYsUUFBUSxDQUFDO2dCQUM5QyxJQUFJSCxNQUFNLFdBQVcsT0FBTzlFLEtBQUtpRixRQUFRLENBQUM7Z0JBQzFDLE9BQU9qRixLQUFLaUYsUUFBUSxDQUFDSDtZQUN2QjtRQUNGO1FBRUEsdUJBQXVCO1FBQ3ZCLE1BQU1JLE9BQU9uQixPQUFPSSxZQUFZO1FBQ2hDLElBQUllLE9BQU8sR0FBRztZQUNaTixXQUFXQSxTQUFTekQsTUFBTSxDQUFDLENBQUM2RCxPQUFTdkIsV0FBV3VCLEtBQUszRCxTQUFTLEtBQUs2RDtRQUNyRTtRQUVBckYsSUFBSXNGLFNBQVMsQ0FBQyxpQkFBaUI7UUFDL0J0RixJQUFJNkUsTUFBTSxDQUFDLEtBQUsxQixJQUFJLENBQUM7WUFBRWxELElBQUk7WUFBTXNGLE9BQU9SLFNBQVNwRixNQUFNO1lBQUVWLE1BQU04RjtRQUFTO0lBQzFFLEVBQUUsT0FBT1MsS0FBSztRQUNaOUQsUUFBUUMsS0FBSyxDQUFDLHdCQUF3QjZEO1FBQ3RDeEYsSUFBSTZFLE1BQU0sQ0FBQyxLQUFLMUIsSUFBSSxDQUFDO1lBQUVsRCxJQUFJO1lBQU8wQixPQUFPOEQsT0FBT0Q7UUFBSztJQUN2RDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFja2F0aG9uLWFnZ3JlZ2F0b3IvLi9wYWdlcy9hcGkvYWdncmVnYXRvci5qcz85MmQ0Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZldGNoID0gcmVxdWlyZShcIm5vZGUtZmV0Y2hcIik7XHJcbmNvbnN0IGNoZWVyaW8gPSByZXF1aXJlKFwiY2hlZXJpb1wiKTtcclxuXHJcbmNvbnN0IEdJVEhVQl9UT0tFTiA9IHByb2Nlc3MuZW52LkdJVEhVQl9UT0tFTjtcclxuXHJcbi8vIGNhY2hlIG9iamVjdCB0byByZWR1Y2UgQVBJIGNhbGxzXHJcbmxldCBjYWNoZSA9IHsgdHM6IDAsIGRhdGE6IG51bGwgfTtcclxuY29uc3QgQ0FDSEVfVFRMID0gMTAwMCAqIDYwICogNTsgLy8gNSBtaW51dGVzXHJcblxyXG4vLyAtLS0gRmV0Y2ggaGFja2F0aG9ucyBmcm9tIFVuc3RvcCAtLS1cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hVbnN0b3AoKSB7XHJcbiAgY29uc3QgTUFYX1NJVEVNQVBTID0gMTI7XHJcbiAgY29uc3QgYmFzZSA9IFwiaHR0cHM6Ly91bnN0b3AuY29tL3NpdGVtYXBzL29wcG9ydHVuaXR5L3NpdGVtYXBcIjtcclxuICBjb25zdCBoZWFkZXJzID0ge1xyXG4gICAgXCJVc2VyLUFnZW50XCI6IFwiTW96aWxsYS81LjBcIixcclxuICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi94bWwsdGV4dC94bWw7cT0wLjksKi8qO3E9MC44XCIsXHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2l0ZW1hcFVybHMgPSBBcnJheS5mcm9tKFxyXG4gICAgeyBsZW5ndGg6IE1BWF9TSVRFTUFQUyB9LFxyXG4gICAgKF8sIGkpID0+IGAke2Jhc2V9JHtpICsgMX0ueG1sYFxyXG4gICk7XHJcbiAgY29uc3QgaXRlbXMgPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCB1cmwgb2Ygc2l0ZW1hcFVybHMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgeyBoZWFkZXJzIH0pO1xyXG4gICAgICBpZiAoIXJlcy5vaykgY29udGludWU7XHJcblxyXG4gICAgICBjb25zdCB4bWwgPSBhd2FpdCByZXMudGV4dCgpO1xyXG4gICAgICBjb25zdCAkID0gY2hlZXJpby5sb2FkKHhtbCwgeyB4bWxNb2RlOiB0cnVlIH0pO1xyXG5cclxuICAgICAgJChcInVybFwiKS5lYWNoKChfLCBlbCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxvYyA9ICQoZWwpLmZpbmQoXCJsb2NcIikudGV4dCgpLnRyaW0oKTtcclxuICAgICAgICBpZiAoIWxvYyB8fCAhL1xcL2hhY2thdGhvbnNcXC8vaS50ZXN0KGxvYykpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbGFzdG1vZCA9ICQoZWwpLmZpbmQoXCJsYXN0bW9kXCIpLnRleHQoKS50cmltKCk7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBzbHVnVG9UaXRsZShcclxuICAgICAgICAgIChsb2Muc3BsaXQoXCIvaGFja2F0aG9ucy9cIilbMV0gfHwgXCJcIikuc3BsaXQoXCIvXCIpWzBdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaXRlbXMucHVzaCh7XHJcbiAgICAgICAgICBzb3VyY2U6IFwidW5zdG9wXCIsXHJcbiAgICAgICAgICB0aXRsZTogdGl0bGUgfHwgXCJVbnRpdGxlZFwiLFxyXG4gICAgICAgICAgbGluazogbG9jLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiXCIsXHJcbiAgICAgICAgICB0YWdzOiBbbGFzdG1vZF0uZmlsdGVyKEJvb2xlYW4pLFxyXG4gICAgICAgICAgcHJpemVUZXh0OiBcIlwiLCAvLyBzaXRlbWFwIGRvZXNu4oCZdCBwcm92aWRlIHByaXplXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiVW5zdG9wIGZldGNoIGVycm9yOlwiLCBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGRlZHVwbGljYXRlIGJ5IGxpbmtcclxuICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XHJcbiAgZm9yIChjb25zdCBpdCBvZiBpdGVtcykgaWYgKCFtYXAuaGFzKGl0LmxpbmspKSBtYXAuc2V0KGl0LmxpbmssIGl0KTtcclxuICBjb25zdCBvdXQgPSBBcnJheS5mcm9tKG1hcC52YWx1ZXMoKSk7XHJcblxyXG4gIC8vIHNvcnQgYnkgbGFzdCBtb2RpZmllZFxyXG4gIG91dC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRhZ3NbMF0gfHwgMCkgLSBuZXcgRGF0ZShhLnRhZ3NbMF0gfHwgMCkpO1xyXG4gIHJldHVybiBvdXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsdWdUb1RpdGxlKHNsdWcpIHtcclxuICBpZiAoIXNsdWcpIHJldHVybiBcIlwiO1xyXG4gIGNvbnN0IGNsZWFuZWQgPSBzbHVnLnJlcGxhY2UoLy1cXGQrJC8sIFwiXCIpO1xyXG4gIHJldHVybiBjbGVhbmVkXHJcbiAgICAuc3BsaXQoXCItXCIpXHJcbiAgICAubWFwKChzKSA9PiAocyA/IHNbMF0udG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkgOiBcIlwiKSlcclxuICAgIC5qb2luKFwiIFwiKTtcclxufVxyXG5cclxuLy8gLS0tIEZldGNoIGhhY2thdGhvbnMgZnJvbSBHaXRIdWIgLS0tXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoR2l0aHViSGFja2F0aG9ucygpIHtcclxuICBjb25zdCBxID0gZW5jb2RlVVJJQ29tcG9uZW50KFxyXG4gICAgXCJoYWNrYXRob24gaW46bmFtZSxkZXNjcmlwdGlvbiBwdXNoZWQ6Pj1cIiArIGdldERhdGVORGF5c0FnbygzNjUpXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vc2VhcmNoL3JlcG9zaXRvcmllcz9xPSR7cX0mc29ydD11cGRhdGVkJm9yZGVyPWRlc2MmcGVyX3BhZ2U9MzBgO1xyXG4gIGNvbnN0IGhlYWRlcnMgPSB7IFwiVXNlci1BZ2VudFwiOiBcImhhY2thdGhvbi1hZ2dyZWdhdG9yXCIgfTtcclxuXHJcbiAgaWYgKEdJVEhVQl9UT0tFTikgaGVhZGVycy5BdXRob3JpemF0aW9uID0gYHRva2VuICR7R0lUSFVCX1RPS0VOfWA7XHJcblxyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgeyBoZWFkZXJzIH0pO1xyXG4gIGlmICghcmVzLm9rKSByZXR1cm4gW107XHJcblxyXG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gIGNvbnN0IGl0ZW1zID0ganNvbi5pdGVtcyB8fCBbXTtcclxuXHJcbiAgcmV0dXJuIGl0ZW1zLm1hcCgoaXQpID0+ICh7XHJcbiAgICBzb3VyY2U6IFwiZ2l0aHViXCIsXHJcbiAgICB0aXRsZTogaXQuZnVsbF9uYW1lLFxyXG4gICAgbGluazogaXQuaHRtbF91cmwsXHJcbiAgICBkZXNjcmlwdGlvbjogaXQuZGVzY3JpcHRpb24gfHwgXCJcIixcclxuICAgIHRhZ3M6IGl0LnRvcGljcyB8fCBbXSxcclxuICAgIHByaXplVGV4dDogXCJcIiwgLy8gcmVwb3MgZG9u4oCZdCBoYXZlIHByaXplc1xyXG4gIH0pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RGF0ZU5EYXlzQWdvKG4pIHtcclxuICBjb25zdCBkID0gbmV3IERhdGUoKTtcclxuICBkLnNldERhdGUoZC5nZXREYXRlKCkgLSBuKTtcclxuICByZXR1cm4gZC50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcclxufVxyXG5cclxuLy8gLS0tIFByaXplIHBhcnNlciAtLS1cclxuZnVuY3Rpb24gcGFyc2VQcml6ZShwcml6ZVRleHQpIHtcclxuICBpZiAoIXByaXplVGV4dCkgcmV0dXJuIDA7XHJcblxyXG4gIGxldCB0eHQgPSBwcml6ZVRleHQudG9VcHBlckNhc2UoKS5yZXBsYWNlKC9bLOKCucKj4oKsJF0vZywgXCJcIikudHJpbSgpO1xyXG5cclxuICAvLyBIYW5kbGUgXCIxMEtcIiwgXCI1S1wiLCBcIjJMXCIgKGxha2hzKSwgZXRjLlxyXG4gIGlmICgvKFxcZCspXFxzKksvLnRlc3QodHh0KSkge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApICogMTAwMDtcclxuICB9XHJcbiAgaWYgKC8oXFxkKylcXHMqTC8udGVzdCh0eHQpKSB7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQoUmVnRXhwLiQxLCAxMCkgKiAxMDAwMDA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtYXRjaCA9IHR4dC5tYXRjaCgvKFxcZHsyLH0pLyk7XHJcbiAgcmV0dXJuIG1hdGNoID8gTnVtYmVyKG1hdGNoWzFdKSA6IDA7XHJcbn1cclxuXHJcbi8vIC0tLSBNYWluIEFQSSBoYW5kbGVyIC0tLVxyXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHNvdXJjZSA9IFwiYWxsXCIsIGZpbHRlciA9IFwiXCIsIG1pblByaXplID0gMCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICBpZiAoIWNhY2hlLmRhdGEgfHwgbm93IC0gY2FjaGUudHMgPiBDQUNIRV9UVEwpIHtcclxuICAgICAgY29uc3QgW3Vuc3RvcCwgZ2l0aHViXSA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbXHJcbiAgICAgICAgZmV0Y2hVbnN0b3AoKSxcclxuICAgICAgICBmZXRjaEdpdGh1YkhhY2thdGhvbnMoKSxcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBjYWNoZSA9IHtcclxuICAgICAgICB0czogRGF0ZS5ub3coKSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICB1bnN0b3A6IHVuc3RvcC5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIgPyB1bnN0b3AudmFsdWUgOiBbXSxcclxuICAgICAgICAgIGdpdGh1YjogZ2l0aHViLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiA/IGdpdGh1Yi52YWx1ZSA6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNvbWJpbmVkID0gW107XHJcbiAgICBpZiAoc291cmNlID09PSBcInVuc3RvcFwiIHx8IHNvdXJjZSA9PT0gXCJhbGxcIilcclxuICAgICAgY29tYmluZWQgPSBjb21iaW5lZC5jb25jYXQoY2FjaGUuZGF0YS51bnN0b3ApO1xyXG4gICAgaWYgKHNvdXJjZSA9PT0gXCJnaXRodWJcIiB8fCBzb3VyY2UgPT09IFwiYWxsXCIpXHJcbiAgICAgIGNvbWJpbmVkID0gY29tYmluZWQuY29uY2F0KGNhY2hlLmRhdGEuZ2l0aHViKTtcclxuXHJcbiAgICAvLyAtLS0gS2V5d29yZCBmaWx0ZXIgLS0tXHJcbiAgICBjb25zdCBmID0gZmlsdGVyLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoZikge1xyXG4gICAgICBjb21iaW5lZCA9IGNvbWJpbmVkLmZpbHRlcigoaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSAoXHJcbiAgICAgICAgICBpdGVtLnRpdGxlICtcclxuICAgICAgICAgIFwiIFwiICtcclxuICAgICAgICAgIGl0ZW0uZGVzY3JpcHRpb24gK1xyXG4gICAgICAgICAgXCIgXCIgK1xyXG4gICAgICAgICAgKGl0ZW0udGFncyB8fCBbXSkuam9pbihcIiBcIilcclxuICAgICAgICApLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIGlmIChmID09PSBcImFpXCIpXHJcbiAgICAgICAgICByZXR1cm4gdGV4dC5pbmNsdWRlcyhcImFpXCIpIHx8IHRleHQuaW5jbHVkZXMoXCJtYWNoaW5lIGxlYXJuaW5nXCIpO1xyXG4gICAgICAgIGlmIChmID09PSBcInN0dWRlbnRcIikgcmV0dXJuIHRleHQuaW5jbHVkZXMoXCJzdHVkZW50XCIpO1xyXG4gICAgICAgIHJldHVybiB0ZXh0LmluY2x1ZGVzKGYpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAtLS0gUHJpemUgZmlsdGVyIC0tLVxyXG4gICAgY29uc3QgbWluUCA9IE51bWJlcihtaW5Qcml6ZSB8fCAwKTtcclxuICAgIGlmIChtaW5QID4gMCkge1xyXG4gICAgICBjb21iaW5lZCA9IGNvbWJpbmVkLmZpbHRlcigoaXRlbSkgPT4gcGFyc2VQcml6ZShpdGVtLnByaXplVGV4dCkgPj0gbWluUCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVzLnNldEhlYWRlcihcIkNhY2hlLUNvbnRyb2xcIiwgXCJzLW1heGFnZT02MCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT0xMjBcIik7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG9rOiB0cnVlLCBjb3VudDogY29tYmluZWQubGVuZ3RoLCBkYXRhOiBjb21iaW5lZCB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJIYWNrYXRob24gQVBJIGVycm9yOlwiLCBlcnIpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBvazogZmFsc2UsIGVycm9yOiBTdHJpbmcoZXJyKSB9KTtcclxuICB9XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJmZXRjaCIsInJlcXVpcmUiLCJjaGVlcmlvIiwiR0lUSFVCX1RPS0VOIiwicHJvY2VzcyIsImVudiIsImNhY2hlIiwidHMiLCJkYXRhIiwiQ0FDSEVfVFRMIiwiZmV0Y2hVbnN0b3AiLCJNQVhfU0lURU1BUFMiLCJiYXNlIiwiaGVhZGVycyIsIkFjY2VwdCIsInNpdGVtYXBVcmxzIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwiXyIsImkiLCJpdGVtcyIsInVybCIsInJlcyIsIm9rIiwieG1sIiwidGV4dCIsIiQiLCJsb2FkIiwieG1sTW9kZSIsImVhY2giLCJlbCIsImxvYyIsImZpbmQiLCJ0cmltIiwidGVzdCIsImxhc3Rtb2QiLCJ0aXRsZSIsInNsdWdUb1RpdGxlIiwic3BsaXQiLCJwdXNoIiwic291cmNlIiwibGluayIsImRlc2NyaXB0aW9uIiwidGFncyIsImZpbHRlciIsIkJvb2xlYW4iLCJwcml6ZVRleHQiLCJlIiwiY29uc29sZSIsImVycm9yIiwibWFwIiwiTWFwIiwiaXQiLCJoYXMiLCJzZXQiLCJvdXQiLCJ2YWx1ZXMiLCJzb3J0IiwiYSIsImIiLCJEYXRlIiwic2x1ZyIsImNsZWFuZWQiLCJyZXBsYWNlIiwicyIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJqb2luIiwiZmV0Y2hHaXRodWJIYWNrYXRob25zIiwicSIsImVuY29kZVVSSUNvbXBvbmVudCIsImdldERhdGVORGF5c0FnbyIsIkF1dGhvcml6YXRpb24iLCJqc29uIiwiZnVsbF9uYW1lIiwiaHRtbF91cmwiLCJ0b3BpY3MiLCJuIiwiZCIsInNldERhdGUiLCJnZXREYXRlIiwidG9JU09TdHJpbmciLCJwYXJzZVByaXplIiwidHh0IiwicGFyc2VJbnQiLCJSZWdFeHAiLCIkMSIsIm1hdGNoIiwiTnVtYmVyIiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcSIsIm1pblByaXplIiwicXVlcnkiLCJub3ciLCJ1bnN0b3AiLCJnaXRodWIiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsInN0YXR1cyIsInZhbHVlIiwiY29tYmluZWQiLCJjb25jYXQiLCJmIiwidG9Mb3dlckNhc2UiLCJpdGVtIiwiaW5jbHVkZXMiLCJtaW5QIiwic2V0SGVhZGVyIiwiY291bnQiLCJlcnIiLCJTdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/aggregator.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/aggregator.js"));
module.exports = __webpack_exports__;

})();