"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/aggregator";
exports.ids = ["pages/api/aggregator"];
exports.modules = {

/***/ "cheerio":
/*!**************************!*\
  !*** external "cheerio" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("cheerio");

/***/ }),

/***/ "node-fetch":
/*!*****************************!*\
  !*** external "node-fetch" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node-fetch");

/***/ }),

/***/ "(api)/./pages/api/aggregator.js":
/*!*********************************!*\
  !*** ./pages/api/aggregator.js ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst fetch = __webpack_require__(/*! node-fetch */ \"node-fetch\");\nconst cheerio = __webpack_require__(/*! cheerio */ \"cheerio\");\nconst GITHUB_TOKEN = process.env.GITHUB_TOKEN || null;\n// cache object to reduce API calls\nlet cache = {\n    ts: 0,\n    data: null\n};\nconst CACHE_TTL = 1000 * 60 * 5; // 5 minutes\n// --- Fetch hackathons from Unstop ---\nasync function fetchUnstop() {\n    const MAX_SITEMAPS = 12;\n    const base = \"https://unstop.com/sitemaps/opportunity/sitemap\";\n    const headers = {\n        \"User-Agent\": \"Mozilla/5.0\",\n        Accept: \"application/xml,text/xml;q=0.9,*/*;q=0.8\"\n    };\n    const sitemapUrls = Array.from({\n        length: MAX_SITEMAPS\n    }, (_, i)=>`${base}${i + 1}.xml`);\n    const items = [];\n    for (const url of sitemapUrls){\n        try {\n            const res = await fetch(url, {\n                headers\n            });\n            if (!res.ok) continue;\n            const xml = await res.text();\n            const $ = cheerio.load(xml, {\n                xmlMode: true\n            });\n            $(\"url\").each((_, el)=>{\n                const loc = $(el).find(\"loc\").text().trim();\n                if (!loc || !/\\/hackathons\\//i.test(loc)) return;\n                const lastmod = $(el).find(\"lastmod\").text().trim();\n                const title = slugToTitle((loc.split(\"/hackathons/\")[1] || \"\").split(\"/\")[0]);\n                items.push({\n                    source: \"unstop\",\n                    title: title || \"Untitled\",\n                    link: loc,\n                    description: \"\",\n                    tags: [\n                        lastmod\n                    ].filter(Boolean),\n                    prizeText: \"\"\n                });\n            });\n        } catch (e) {\n            console.error(\"Unstop fetch error:\", e);\n        }\n    }\n    // deduplicate by link\n    const map = new Map();\n    for (const it of items)if (!map.has(it.link)) map.set(it.link, it);\n    const out = Array.from(map.values());\n    // sort by last modified\n    out.sort((a, b)=>new Date(b.tags[0] || 0) - new Date(a.tags[0] || 0));\n    return out;\n}\nfunction slugToTitle(slug) {\n    if (!slug) return \"\";\n    const cleaned = slug.replace(/-\\d+$/, \"\");\n    return cleaned.split(\"-\").map((s)=>s ? s[0].toUpperCase() + s.slice(1) : \"\").join(\" \");\n}\n// --- Fetch hackathons from GitHub ---\nasync function fetchGithubHackathons() {\n    const q = encodeURIComponent(\"hackathon in:name,description pushed:>=\" + getDateNDaysAgo(365));\n    const url = `https://api.github.com/search/repositories?q=${q}&sort=updated&order=desc&per_page=30`;\n    const headers = {\n        \"User-Agent\": \"hackathon-aggregator\"\n    };\n    if (GITHUB_TOKEN) headers.Authorization = `token ${GITHUB_TOKEN}`;\n    const res = await fetch(url, {\n        headers\n    });\n    if (!res.ok) return [];\n    const json = await res.json();\n    const items = json.items || [];\n    return items.map((it)=>({\n            source: \"github\",\n            title: it.full_name,\n            link: it.html_url,\n            description: it.description || \"\",\n            tags: it.topics || [],\n            prizeText: \"\"\n        }));\n}\nfunction getDateNDaysAgo(n) {\n    const d = new Date();\n    d.setDate(d.getDate() - n);\n    return d.toISOString().slice(0, 10);\n}\n// --- Prize parser ---\nfunction parsePrize(prizeText) {\n    if (!prizeText) return 0;\n    let txt = prizeText.toUpperCase().replace(/[,₹£€$]/g, \"\").trim();\n    // Handle \"10K\", \"5K\", \"2L\" (lakhs), etc.\n    if (/(\\d+)\\s*K/.test(txt)) {\n        return parseInt(RegExp.$1, 10) * 1000;\n    }\n    if (/(\\d+)\\s*L/.test(txt)) {\n        return parseInt(RegExp.$1, 10) * 100000;\n    }\n    const match = txt.match(/(\\d{2,})/);\n    return match ? Number(match[1]) : 0;\n}\n// --- Main API handler ---\nmodule.exports = async (req, res)=>{\n    try {\n        const { source = \"all\", filter = \"\", minPrize = 0 } = req.query;\n        const now = Date.now();\n        if (!cache.data || now - cache.ts > CACHE_TTL) {\n            const [unstop, github] = await Promise.allSettled([\n                fetchUnstop(),\n                fetchGithubHackathons()\n            ]);\n            cache = {\n                ts: Date.now(),\n                data: {\n                    unstop: unstop.status === \"fulfilled\" ? unstop.value : [],\n                    github: github.status === \"fulfilled\" ? github.value : []\n                }\n            };\n        }\n        let combined = [];\n        if (source === \"unstop\" || source === \"all\") combined = combined.concat(cache.data.unstop);\n        if (source === \"github\" || source === \"all\") combined = combined.concat(cache.data.github);\n        // --- Keyword filter ---\n        const f = filter.toLowerCase();\n        if (f) {\n            combined = combined.filter((item)=>{\n                const text = (item.title + \" \" + item.description + \" \" + (item.tags || []).join(\" \")).toLowerCase();\n                if (f === \"ai\") return text.includes(\"ai\") || text.includes(\"machine learning\");\n                if (f === \"student\") return text.includes(\"student\");\n                return text.includes(f);\n            });\n        }\n        // --- Prize filter ---\n        const minP = Number(minPrize || 0);\n        if (minP > 0) {\n            combined = combined.filter((item)=>parsePrize(item.prizeText) >= minP);\n        }\n        res.setHeader(\"Cache-Control\", \"s-maxage=60, stale-while-revalidate=120\");\n        res.status(200).json({\n            ok: true,\n            count: combined.length,\n            data: combined\n        });\n    } catch (err) {\n        console.error(\"Hackathon API error:\", err);\n        res.status(500).json({\n            ok: false,\n            error: String(err)\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYWdncmVnYXRvci5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsUUFBUUMsbUJBQU9BLENBQUMsOEJBQVk7QUFDbEMsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsd0JBQVM7QUFFakMsTUFBTUUsZUFBZUMsUUFBUUMsR0FBRyxDQUFDRixZQUFZLElBQUk7QUFFakQsbUNBQW1DO0FBQ25DLElBQUlHLFFBQVE7SUFBRUMsSUFBSTtJQUFHQyxNQUFNO0FBQUs7QUFDaEMsTUFBTUMsWUFBWSxPQUFPLEtBQUssR0FBRyxZQUFZO0FBRTdDLHVDQUF1QztBQUN2QyxlQUFlQztJQUNiLE1BQU1DLGVBQWU7SUFDckIsTUFBTUMsT0FBTztJQUNiLE1BQU1DLFVBQVU7UUFDZCxjQUFjO1FBQ2RDLFFBQVE7SUFDVjtJQUVBLE1BQU1DLGNBQWNDLE1BQU1DLElBQUksQ0FDNUI7UUFBRUMsUUFBUVA7SUFBYSxHQUN2QixDQUFDUSxHQUFHQyxJQUFNLENBQUMsRUFBRVIsS0FBSyxFQUFFUSxJQUFJLEVBQUUsSUFBSSxDQUFDO0lBRWpDLE1BQU1DLFFBQVEsRUFBRTtJQUVoQixLQUFLLE1BQU1DLE9BQU9QLFlBQWE7UUFDN0IsSUFBSTtZQUNGLE1BQU1RLE1BQU0sTUFBTXZCLE1BQU1zQixLQUFLO2dCQUFFVDtZQUFRO1lBQ3ZDLElBQUksQ0FBQ1UsSUFBSUMsRUFBRSxFQUFFO1lBRWIsTUFBTUMsTUFBTSxNQUFNRixJQUFJRyxJQUFJO1lBQzFCLE1BQU1DLElBQUl6QixRQUFRMEIsSUFBSSxDQUFDSCxLQUFLO2dCQUFFSSxTQUFTO1lBQUs7WUFFNUNGLEVBQUUsT0FBT0csSUFBSSxDQUFDLENBQUNYLEdBQUdZO2dCQUNoQixNQUFNQyxNQUFNTCxFQUFFSSxJQUFJRSxJQUFJLENBQUMsT0FBT1AsSUFBSSxHQUFHUSxJQUFJO2dCQUN6QyxJQUFJLENBQUNGLE9BQU8sQ0FBQyxrQkFBa0JHLElBQUksQ0FBQ0gsTUFBTTtnQkFFMUMsTUFBTUksVUFBVVQsRUFBRUksSUFBSUUsSUFBSSxDQUFDLFdBQVdQLElBQUksR0FBR1EsSUFBSTtnQkFDakQsTUFBTUcsUUFBUUMsWUFDWixDQUFDTixJQUFJTyxLQUFLLENBQUMsZUFBZSxDQUFDLEVBQUUsSUFBSSxFQUFDLEVBQUdBLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFHcERsQixNQUFNbUIsSUFBSSxDQUFDO29CQUNUQyxRQUFRO29CQUNSSixPQUFPQSxTQUFTO29CQUNoQkssTUFBTVY7b0JBQ05XLGFBQWE7b0JBQ2JDLE1BQU07d0JBQUNSO3FCQUFRLENBQUNTLE1BQU0sQ0FBQ0M7b0JBQ3ZCQyxXQUFXO2dCQUNiO1lBQ0Y7UUFDRixFQUFFLE9BQU9DLEdBQUc7WUFDVkMsUUFBUUMsS0FBSyxDQUFDLHVCQUF1QkY7UUFDdkM7SUFDRjtJQUVBLHNCQUFzQjtJQUN0QixNQUFNRyxNQUFNLElBQUlDO0lBQ2hCLEtBQUssTUFBTUMsTUFBTWhDLE1BQU8sSUFBSSxDQUFDOEIsSUFBSUcsR0FBRyxDQUFDRCxHQUFHWCxJQUFJLEdBQUdTLElBQUlJLEdBQUcsQ0FBQ0YsR0FBR1gsSUFBSSxFQUFFVztJQUNoRSxNQUFNRyxNQUFNeEMsTUFBTUMsSUFBSSxDQUFDa0MsSUFBSU0sTUFBTTtJQUVqQyx3QkFBd0I7SUFDeEJELElBQUlFLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNLElBQUlDLEtBQUtELEVBQUVoQixJQUFJLENBQUMsRUFBRSxJQUFJLEtBQUssSUFBSWlCLEtBQUtGLEVBQUVmLElBQUksQ0FBQyxFQUFFLElBQUk7SUFDcEUsT0FBT1k7QUFDVDtBQUVBLFNBQVNsQixZQUFZd0IsSUFBSTtJQUN2QixJQUFJLENBQUNBLE1BQU0sT0FBTztJQUNsQixNQUFNQyxVQUFVRCxLQUFLRSxPQUFPLENBQUMsU0FBUztJQUN0QyxPQUFPRCxRQUNKeEIsS0FBSyxDQUFDLEtBQ05ZLEdBQUcsQ0FBQyxDQUFDYyxJQUFPQSxJQUFJQSxDQUFDLENBQUMsRUFBRSxDQUFDQyxXQUFXLEtBQUtELEVBQUVFLEtBQUssQ0FBQyxLQUFLLElBQ2xEQyxJQUFJLENBQUM7QUFDVjtBQUVBLHVDQUF1QztBQUN2QyxlQUFlQztJQUNiLE1BQU1DLElBQUlDLG1CQUNSLDRDQUE0Q0MsZ0JBQWdCO0lBRzlELE1BQU1sRCxNQUFNLENBQUMsNkNBQTZDLEVBQUVnRCxFQUFFLG9DQUFvQyxDQUFDO0lBQ25HLE1BQU16RCxVQUFVO1FBQUUsY0FBYztJQUF1QjtJQUV2RCxJQUFJVixjQUFjVSxRQUFRNEQsYUFBYSxHQUFHLENBQUMsTUFBTSxFQUFFdEUsYUFBYSxDQUFDO0lBRWpFLE1BQU1vQixNQUFNLE1BQU12QixNQUFNc0IsS0FBSztRQUFFVDtJQUFRO0lBQ3ZDLElBQUksQ0FBQ1UsSUFBSUMsRUFBRSxFQUFFLE9BQU8sRUFBRTtJQUV0QixNQUFNa0QsT0FBTyxNQUFNbkQsSUFBSW1ELElBQUk7SUFDM0IsTUFBTXJELFFBQVFxRCxLQUFLckQsS0FBSyxJQUFJLEVBQUU7SUFFOUIsT0FBT0EsTUFBTThCLEdBQUcsQ0FBQyxDQUFDRSxLQUFRO1lBQ3hCWixRQUFRO1lBQ1JKLE9BQU9nQixHQUFHc0IsU0FBUztZQUNuQmpDLE1BQU1XLEdBQUd1QixRQUFRO1lBQ2pCakMsYUFBYVUsR0FBR1YsV0FBVyxJQUFJO1lBQy9CQyxNQUFNUyxHQUFHd0IsTUFBTSxJQUFJLEVBQUU7WUFDckI5QixXQUFXO1FBQ2I7QUFDRjtBQUVBLFNBQVN5QixnQkFBZ0JNLENBQUM7SUFDeEIsTUFBTUMsSUFBSSxJQUFJbEI7SUFDZGtCLEVBQUVDLE9BQU8sQ0FBQ0QsRUFBRUUsT0FBTyxLQUFLSDtJQUN4QixPQUFPQyxFQUFFRyxXQUFXLEdBQUdmLEtBQUssQ0FBQyxHQUFHO0FBQ2xDO0FBRUEsdUJBQXVCO0FBQ3ZCLFNBQVNnQixXQUFXcEMsU0FBUztJQUMzQixJQUFJLENBQUNBLFdBQVcsT0FBTztJQUV2QixJQUFJcUMsTUFBTXJDLFVBQVVtQixXQUFXLEdBQUdGLE9BQU8sQ0FBQyxZQUFZLElBQUk5QixJQUFJO0lBRTlELHlDQUF5QztJQUN6QyxJQUFJLFlBQVlDLElBQUksQ0FBQ2lELE1BQU07UUFDekIsT0FBT0MsU0FBU0MsT0FBT0MsRUFBRSxFQUFFLE1BQU07SUFDbkM7SUFDQSxJQUFJLFlBQVlwRCxJQUFJLENBQUNpRCxNQUFNO1FBQ3pCLE9BQU9DLFNBQVNDLE9BQU9DLEVBQUUsRUFBRSxNQUFNO0lBQ25DO0lBRUEsTUFBTUMsUUFBUUosSUFBSUksS0FBSyxDQUFDO0lBQ3hCLE9BQU9BLFFBQVFDLE9BQU9ELEtBQUssQ0FBQyxFQUFFLElBQUk7QUFDcEM7QUFFQSwyQkFBMkI7QUFDM0JFLE9BQU9DLE9BQU8sR0FBRyxPQUFPQyxLQUFLckU7SUFDM0IsSUFBSTtRQUNGLE1BQU0sRUFBRWtCLFNBQVMsS0FBSyxFQUFFSSxTQUFTLEVBQUUsRUFBRWdELFdBQVcsQ0FBQyxFQUFFLEdBQUdELElBQUlFLEtBQUs7UUFFL0QsTUFBTUMsTUFBTWxDLEtBQUtrQyxHQUFHO1FBQ3BCLElBQUksQ0FBQ3pGLE1BQU1FLElBQUksSUFBSXVGLE1BQU16RixNQUFNQyxFQUFFLEdBQUdFLFdBQVc7WUFDN0MsTUFBTSxDQUFDdUYsUUFBUUMsT0FBTyxHQUFHLE1BQU1DLFFBQVFDLFVBQVUsQ0FBQztnQkFDaER6RjtnQkFDQTJEO2FBQ0Q7WUFFRC9ELFFBQVE7Z0JBQ05DLElBQUlzRCxLQUFLa0MsR0FBRztnQkFDWnZGLE1BQU07b0JBQ0p3RixRQUFRQSxPQUFPSSxNQUFNLEtBQUssY0FBY0osT0FBT0ssS0FBSyxHQUFHLEVBQUU7b0JBQ3pESixRQUFRQSxPQUFPRyxNQUFNLEtBQUssY0FBY0gsT0FBT0ksS0FBSyxHQUFHLEVBQUU7Z0JBQzNEO1lBQ0Y7UUFDRjtRQUVBLElBQUlDLFdBQVcsRUFBRTtRQUNqQixJQUFJN0QsV0FBVyxZQUFZQSxXQUFXLE9BQ3BDNkQsV0FBV0EsU0FBU0MsTUFBTSxDQUFDakcsTUFBTUUsSUFBSSxDQUFDd0YsTUFBTTtRQUM5QyxJQUFJdkQsV0FBVyxZQUFZQSxXQUFXLE9BQ3BDNkQsV0FBV0EsU0FBU0MsTUFBTSxDQUFDakcsTUFBTUUsSUFBSSxDQUFDeUYsTUFBTTtRQUU5Qyx5QkFBeUI7UUFDekIsTUFBTU8sSUFBSTNELE9BQU80RCxXQUFXO1FBQzVCLElBQUlELEdBQUc7WUFDTEYsV0FBV0EsU0FBU3pELE1BQU0sQ0FBQyxDQUFDNkQ7Z0JBQzFCLE1BQU1oRixPQUFPLENBQ1hnRixLQUFLckUsS0FBSyxHQUNWLE1BQ0FxRSxLQUFLL0QsV0FBVyxHQUNoQixNQUNBLENBQUMrRCxLQUFLOUQsSUFBSSxJQUFJLEVBQUUsRUFBRXdCLElBQUksQ0FBQyxJQUFHLEVBQzFCcUMsV0FBVztnQkFFYixJQUFJRCxNQUFNLE1BQ1IsT0FBTzlFLEtBQUtpRixRQUFRLENBQUMsU0FBU2pGLEtBQUtpRixRQUFRLENBQUM7Z0JBQzlDLElBQUlILE1BQU0sV0FBVyxPQUFPOUUsS0FBS2lGLFFBQVEsQ0FBQztnQkFDMUMsT0FBT2pGLEtBQUtpRixRQUFRLENBQUNIO1lBQ3ZCO1FBQ0Y7UUFFQSx1QkFBdUI7UUFDdkIsTUFBTUksT0FBT25CLE9BQU9JLFlBQVk7UUFDaEMsSUFBSWUsT0FBTyxHQUFHO1lBQ1pOLFdBQVdBLFNBQVN6RCxNQUFNLENBQUMsQ0FBQzZELE9BQVN2QixXQUFXdUIsS0FBSzNELFNBQVMsS0FBSzZEO1FBQ3JFO1FBRUFyRixJQUFJc0YsU0FBUyxDQUFDLGlCQUFpQjtRQUMvQnRGLElBQUk2RSxNQUFNLENBQUMsS0FBSzFCLElBQUksQ0FBQztZQUFFbEQsSUFBSTtZQUFNc0YsT0FBT1IsU0FBU3BGLE1BQU07WUFBRVYsTUFBTThGO1FBQVM7SUFDMUUsRUFBRSxPQUFPUyxLQUFLO1FBQ1o5RCxRQUFRQyxLQUFLLENBQUMsd0JBQXdCNkQ7UUFDdEN4RixJQUFJNkUsTUFBTSxDQUFDLEtBQUsxQixJQUFJLENBQUM7WUFBRWxELElBQUk7WUFBTzBCLE9BQU84RCxPQUFPRDtRQUFLO0lBQ3ZEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWNrYXRob24tYWdncmVnYXRvci8uL3BhZ2VzL2FwaS9hZ2dyZWdhdG9yLmpzPzkyZDQiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZmV0Y2ggPSByZXF1aXJlKFwibm9kZS1mZXRjaFwiKTtcclxuY29uc3QgY2hlZXJpbyA9IHJlcXVpcmUoXCJjaGVlcmlvXCIpO1xyXG5cclxuY29uc3QgR0lUSFVCX1RPS0VOID0gcHJvY2Vzcy5lbnYuR0lUSFVCX1RPS0VOIHx8IG51bGw7XHJcblxyXG4vLyBjYWNoZSBvYmplY3QgdG8gcmVkdWNlIEFQSSBjYWxsc1xyXG5sZXQgY2FjaGUgPSB7IHRzOiAwLCBkYXRhOiBudWxsIH07XHJcbmNvbnN0IENBQ0hFX1RUTCA9IDEwMDAgKiA2MCAqIDU7IC8vIDUgbWludXRlc1xyXG5cclxuLy8gLS0tIEZldGNoIGhhY2thdGhvbnMgZnJvbSBVbnN0b3AgLS0tXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoVW5zdG9wKCkge1xyXG4gIGNvbnN0IE1BWF9TSVRFTUFQUyA9IDEyO1xyXG4gIGNvbnN0IGJhc2UgPSBcImh0dHBzOi8vdW5zdG9wLmNvbS9zaXRlbWFwcy9vcHBvcnR1bml0eS9zaXRlbWFwXCI7XHJcbiAgY29uc3QgaGVhZGVycyA9IHtcclxuICAgIFwiVXNlci1BZ2VudFwiOiBcIk1vemlsbGEvNS4wXCIsXHJcbiAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24veG1sLHRleHQveG1sO3E9MC45LCovKjtxPTAuOFwiLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNpdGVtYXBVcmxzID0gQXJyYXkuZnJvbShcclxuICAgIHsgbGVuZ3RoOiBNQVhfU0lURU1BUFMgfSxcclxuICAgIChfLCBpKSA9PiBgJHtiYXNlfSR7aSArIDF9LnhtbGBcclxuICApO1xyXG4gIGNvbnN0IGl0ZW1zID0gW107XHJcblxyXG4gIGZvciAoY29uc3QgdXJsIG9mIHNpdGVtYXBVcmxzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsgaGVhZGVycyB9KTtcclxuICAgICAgaWYgKCFyZXMub2spIGNvbnRpbnVlO1xyXG5cclxuICAgICAgY29uc3QgeG1sID0gYXdhaXQgcmVzLnRleHQoKTtcclxuICAgICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZCh4bWwsIHsgeG1sTW9kZTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICQoXCJ1cmxcIikuZWFjaCgoXywgZWwpID0+IHtcclxuICAgICAgICBjb25zdCBsb2MgPSAkKGVsKS5maW5kKFwibG9jXCIpLnRleHQoKS50cmltKCk7XHJcbiAgICAgICAgaWYgKCFsb2MgfHwgIS9cXC9oYWNrYXRob25zXFwvL2kudGVzdChsb2MpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGxhc3Rtb2QgPSAkKGVsKS5maW5kKFwibGFzdG1vZFwiKS50ZXh0KCkudHJpbSgpO1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gc2x1Z1RvVGl0bGUoXHJcbiAgICAgICAgICAobG9jLnNwbGl0KFwiL2hhY2thdGhvbnMvXCIpWzFdIHx8IFwiXCIpLnNwbGl0KFwiL1wiKVswXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGl0ZW1zLnB1c2goe1xyXG4gICAgICAgICAgc291cmNlOiBcInVuc3RvcFwiLFxyXG4gICAgICAgICAgdGl0bGU6IHRpdGxlIHx8IFwiVW50aXRsZWRcIixcclxuICAgICAgICAgIGxpbms6IGxvYyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxyXG4gICAgICAgICAgdGFnczogW2xhc3Rtb2RdLmZpbHRlcihCb29sZWFuKSxcclxuICAgICAgICAgIHByaXplVGV4dDogXCJcIiwgLy8gc2l0ZW1hcCBkb2VzbuKAmXQgcHJvdmlkZSBwcml6ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIlVuc3RvcCBmZXRjaCBlcnJvcjpcIiwgZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBkZWR1cGxpY2F0ZSBieSBsaW5rXHJcbiAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xyXG4gIGZvciAoY29uc3QgaXQgb2YgaXRlbXMpIGlmICghbWFwLmhhcyhpdC5saW5rKSkgbWFwLnNldChpdC5saW5rLCBpdCk7XHJcbiAgY29uc3Qgb3V0ID0gQXJyYXkuZnJvbShtYXAudmFsdWVzKCkpO1xyXG5cclxuICAvLyBzb3J0IGJ5IGxhc3QgbW9kaWZpZWRcclxuICBvdXQuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi50YWdzWzBdIHx8IDApIC0gbmV3IERhdGUoYS50YWdzWzBdIHx8IDApKTtcclxuICByZXR1cm4gb3V0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzbHVnVG9UaXRsZShzbHVnKSB7XHJcbiAgaWYgKCFzbHVnKSByZXR1cm4gXCJcIjtcclxuICBjb25zdCBjbGVhbmVkID0gc2x1Zy5yZXBsYWNlKC8tXFxkKyQvLCBcIlwiKTtcclxuICByZXR1cm4gY2xlYW5lZFxyXG4gICAgLnNwbGl0KFwiLVwiKVxyXG4gICAgLm1hcCgocykgPT4gKHMgPyBzWzBdLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpIDogXCJcIikpXHJcbiAgICAuam9pbihcIiBcIik7XHJcbn1cclxuXHJcbi8vIC0tLSBGZXRjaCBoYWNrYXRob25zIGZyb20gR2l0SHViIC0tLVxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaEdpdGh1YkhhY2thdGhvbnMoKSB7XHJcbiAgY29uc3QgcSA9IGVuY29kZVVSSUNvbXBvbmVudChcclxuICAgIFwiaGFja2F0aG9uIGluOm5hbWUsZGVzY3JpcHRpb24gcHVzaGVkOj49XCIgKyBnZXREYXRlTkRheXNBZ28oMzY1KVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3NlYXJjaC9yZXBvc2l0b3JpZXM/cT0ke3F9JnNvcnQ9dXBkYXRlZCZvcmRlcj1kZXNjJnBlcl9wYWdlPTMwYDtcclxuICBjb25zdCBoZWFkZXJzID0geyBcIlVzZXItQWdlbnRcIjogXCJoYWNrYXRob24tYWdncmVnYXRvclwiIH07XHJcblxyXG4gIGlmIChHSVRIVUJfVE9LRU4pIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGB0b2tlbiAke0dJVEhVQl9UT0tFTn1gO1xyXG5cclxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHsgaGVhZGVycyB9KTtcclxuICBpZiAoIXJlcy5vaykgcmV0dXJuIFtdO1xyXG5cclxuICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICBjb25zdCBpdGVtcyA9IGpzb24uaXRlbXMgfHwgW107XHJcblxyXG4gIHJldHVybiBpdGVtcy5tYXAoKGl0KSA9PiAoe1xyXG4gICAgc291cmNlOiBcImdpdGh1YlwiLFxyXG4gICAgdGl0bGU6IGl0LmZ1bGxfbmFtZSxcclxuICAgIGxpbms6IGl0Lmh0bWxfdXJsLFxyXG4gICAgZGVzY3JpcHRpb246IGl0LmRlc2NyaXB0aW9uIHx8IFwiXCIsXHJcbiAgICB0YWdzOiBpdC50b3BpY3MgfHwgW10sXHJcbiAgICBwcml6ZVRleHQ6IFwiXCIsIC8vIHJlcG9zIGRvbuKAmXQgaGF2ZSBwcml6ZXNcclxuICB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERhdGVORGF5c0FnbyhuKSB7XHJcbiAgY29uc3QgZCA9IG5ldyBEYXRlKCk7XHJcbiAgZC5zZXREYXRlKGQuZ2V0RGF0ZSgpIC0gbik7XHJcbiAgcmV0dXJuIGQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XHJcbn1cclxuXHJcbi8vIC0tLSBQcml6ZSBwYXJzZXIgLS0tXHJcbmZ1bmN0aW9uIHBhcnNlUHJpemUocHJpemVUZXh0KSB7XHJcbiAgaWYgKCFwcml6ZVRleHQpIHJldHVybiAwO1xyXG5cclxuICBsZXQgdHh0ID0gcHJpemVUZXh0LnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvWyzigrnCo+KCrCRdL2csIFwiXCIpLnRyaW0oKTtcclxuXHJcbiAgLy8gSGFuZGxlIFwiMTBLXCIsIFwiNUtcIiwgXCIyTFwiIChsYWtocyksIGV0Yy5cclxuICBpZiAoLyhcXGQrKVxccypLLy50ZXN0KHR4dCkpIHtcclxuICAgIHJldHVybiBwYXJzZUludChSZWdFeHAuJDEsIDEwKSAqIDEwMDA7XHJcbiAgfVxyXG4gIGlmICgvKFxcZCspXFxzKkwvLnRlc3QodHh0KSkge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KFJlZ0V4cC4kMSwgMTApICogMTAwMDAwO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWF0Y2ggPSB0eHQubWF0Y2goLyhcXGR7Mix9KS8pO1xyXG4gIHJldHVybiBtYXRjaCA/IE51bWJlcihtYXRjaFsxXSkgOiAwO1xyXG59XHJcblxyXG4vLyAtLS0gTWFpbiBBUEkgaGFuZGxlciAtLS1cclxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBzb3VyY2UgPSBcImFsbFwiLCBmaWx0ZXIgPSBcIlwiLCBtaW5Qcml6ZSA9IDAgfSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgaWYgKCFjYWNoZS5kYXRhIHx8IG5vdyAtIGNhY2hlLnRzID4gQ0FDSEVfVFRMKSB7XHJcbiAgICAgIGNvbnN0IFt1bnN0b3AsIGdpdGh1Yl0gPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoW1xyXG4gICAgICAgIGZldGNoVW5zdG9wKCksXHJcbiAgICAgICAgZmV0Y2hHaXRodWJIYWNrYXRob25zKCksXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgY2FjaGUgPSB7XHJcbiAgICAgICAgdHM6IERhdGUubm93KCksXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgdW5zdG9wOiB1bnN0b3Auc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiID8gdW5zdG9wLnZhbHVlIDogW10sXHJcbiAgICAgICAgICBnaXRodWI6IGdpdGh1Yi5zdGF0dXMgPT09IFwiZnVsZmlsbGVkXCIgPyBnaXRodWIudmFsdWUgOiBbXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBjb21iaW5lZCA9IFtdO1xyXG4gICAgaWYgKHNvdXJjZSA9PT0gXCJ1bnN0b3BcIiB8fCBzb3VyY2UgPT09IFwiYWxsXCIpXHJcbiAgICAgIGNvbWJpbmVkID0gY29tYmluZWQuY29uY2F0KGNhY2hlLmRhdGEudW5zdG9wKTtcclxuICAgIGlmIChzb3VyY2UgPT09IFwiZ2l0aHViXCIgfHwgc291cmNlID09PSBcImFsbFwiKVxyXG4gICAgICBjb21iaW5lZCA9IGNvbWJpbmVkLmNvbmNhdChjYWNoZS5kYXRhLmdpdGh1Yik7XHJcblxyXG4gICAgLy8gLS0tIEtleXdvcmQgZmlsdGVyIC0tLVxyXG4gICAgY29uc3QgZiA9IGZpbHRlci50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKGYpIHtcclxuICAgICAgY29tYmluZWQgPSBjb21iaW5lZC5maWx0ZXIoKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gKFxyXG4gICAgICAgICAgaXRlbS50aXRsZSArXHJcbiAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICBpdGVtLmRlc2NyaXB0aW9uICtcclxuICAgICAgICAgIFwiIFwiICtcclxuICAgICAgICAgIChpdGVtLnRhZ3MgfHwgW10pLmpvaW4oXCIgXCIpXHJcbiAgICAgICAgKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICBpZiAoZiA9PT0gXCJhaVwiKVxyXG4gICAgICAgICAgcmV0dXJuIHRleHQuaW5jbHVkZXMoXCJhaVwiKSB8fCB0ZXh0LmluY2x1ZGVzKFwibWFjaGluZSBsZWFybmluZ1wiKTtcclxuICAgICAgICBpZiAoZiA9PT0gXCJzdHVkZW50XCIpIHJldHVybiB0ZXh0LmluY2x1ZGVzKFwic3R1ZGVudFwiKTtcclxuICAgICAgICByZXR1cm4gdGV4dC5pbmNsdWRlcyhmKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIFByaXplIGZpbHRlciAtLS1cclxuICAgIGNvbnN0IG1pblAgPSBOdW1iZXIobWluUHJpemUgfHwgMCk7XHJcbiAgICBpZiAobWluUCA+IDApIHtcclxuICAgICAgY29tYmluZWQgPSBjb21iaW5lZC5maWx0ZXIoKGl0ZW0pID0+IHBhcnNlUHJpemUoaXRlbS5wcml6ZVRleHQpID49IG1pblApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zZXRIZWFkZXIoXCJDYWNoZS1Db250cm9sXCIsIFwicy1tYXhhZ2U9NjAsIHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9MTIwXCIpO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBvazogdHJ1ZSwgY291bnQ6IGNvbWJpbmVkLmxlbmd0aCwgZGF0YTogY29tYmluZWQgfSk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiSGFja2F0aG9uIEFQSSBlcnJvcjpcIiwgZXJyKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgb2s6IGZhbHNlLCBlcnJvcjogU3RyaW5nKGVycikgfSk7XHJcbiAgfVxyXG59O1xyXG4iXSwibmFtZXMiOlsiZmV0Y2giLCJyZXF1aXJlIiwiY2hlZXJpbyIsIkdJVEhVQl9UT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJjYWNoZSIsInRzIiwiZGF0YSIsIkNBQ0hFX1RUTCIsImZldGNoVW5zdG9wIiwiTUFYX1NJVEVNQVBTIiwiYmFzZSIsImhlYWRlcnMiLCJBY2NlcHQiLCJzaXRlbWFwVXJscyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiaXRlbXMiLCJ1cmwiLCJyZXMiLCJvayIsInhtbCIsInRleHQiLCIkIiwibG9hZCIsInhtbE1vZGUiLCJlYWNoIiwiZWwiLCJsb2MiLCJmaW5kIiwidHJpbSIsInRlc3QiLCJsYXN0bW9kIiwidGl0bGUiLCJzbHVnVG9UaXRsZSIsInNwbGl0IiwicHVzaCIsInNvdXJjZSIsImxpbmsiLCJkZXNjcmlwdGlvbiIsInRhZ3MiLCJmaWx0ZXIiLCJCb29sZWFuIiwicHJpemVUZXh0IiwiZSIsImNvbnNvbGUiLCJlcnJvciIsIm1hcCIsIk1hcCIsIml0IiwiaGFzIiwic2V0Iiwib3V0IiwidmFsdWVzIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsInNsdWciLCJjbGVhbmVkIiwicmVwbGFjZSIsInMiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiam9pbiIsImZldGNoR2l0aHViSGFja2F0aG9ucyIsInEiLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZXREYXRlTkRheXNBZ28iLCJBdXRob3JpemF0aW9uIiwianNvbiIsImZ1bGxfbmFtZSIsImh0bWxfdXJsIiwidG9waWNzIiwibiIsImQiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInRvSVNPU3RyaW5nIiwicGFyc2VQcml6ZSIsInR4dCIsInBhcnNlSW50IiwiUmVnRXhwIiwiJDEiLCJtYXRjaCIsIk51bWJlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXEiLCJtaW5Qcml6ZSIsInF1ZXJ5Iiwibm93IiwidW5zdG9wIiwiZ2l0aHViIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJzdGF0dXMiLCJ2YWx1ZSIsImNvbWJpbmVkIiwiY29uY2F0IiwiZiIsInRvTG93ZXJDYXNlIiwiaXRlbSIsImluY2x1ZGVzIiwibWluUCIsInNldEhlYWRlciIsImNvdW50IiwiZXJyIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/aggregator.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/aggregator.js"));
module.exports = __webpack_exports__;

})();